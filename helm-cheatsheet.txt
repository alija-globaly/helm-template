Helm Command Cheat Sheet

1. Install a Helm chart
microk8s helm install <release-name> <chart-path> \
  --namespace <namespace> \
  --create-namespace

2. Reinstall (replace the existing release)
microk8s helm install <release-name> <chart-path> \
  --namespace <namespace> \
  --replace

3. Uninstall a release
microk8s helm uninstall <release-name> -n <namespace>

4. List all releases in a namespace
microk8s helm list -n <namespace>

5. Upgrade an existing release
microk8s helm upgrade <release-name> <chart-path> \
  -n <namespace>

6. Upgrade or install (safe option)
microk8s helm upgrade --install <release-name> <chart-path> \
  -n <namespace>

7. Update chart dependencies
microk8s helm dependency update <chart-path>/

Note: Typical Workflow (when library chart changes). After updating anything inside your library chart, run:
microk8s helm dependency update <chart-path>/
microk8s helm upgrade <release-name> <chart-path> -n <namespace>

8. Render Helm templates (validate YAML without installing)
microk8s helm template <release-name> <chart-path> \
  --namespace <namespace>

9. Render with debug and save output
microk8s helm template <release-name> <chart-path> \
  --debug > /tmp/output.yaml



cd ~/helm-test/centralized-microservices

# Test
helm template sms-campaign . -f values-sms-campaign.yaml --namespace agentcis-sms-campaign

# Install
microk8s helm install sms-campaign . -f values-sms-campaign.yaml --namespace agentcis-sms-campaign --create-namespace

# Verify
microk8s kubectl get all -n agentcis-sms-campaign

10. microk8s helm install sms-campaign . -f values-sms-campaign.yml --namespace agentcis-sms-campaign

microk8s helm install myloki grafana/loki -f loki-custom-values.yaml --namespace monitoring
microk8s helm install mygrafana grafana/grafana -f grafana-custom-values.yaml --namespace monitoring

helm install mygrafana grafana/grafana -f grafana-custom-values.yaml --namespace monitoring

# Delete old secret
kubectl delete secret mygrafana -n monitoring

# Delete old configmap
kubectl delete configmap mygrafana -n monitoring

# Optional: delete PVC if you want a completely fresh DB (careful, you lose dashboards)
kubectl delete pvc mygrafana -n monitoring


helm repo add prometheus-community https://prometheus-community.github.io/helm-charts

helm install myprometheus prometheus-community/kube-prometheus-stack   --namespace monitoring   -f prometheus-custom-values.yaml
helm install mytempo grafana/tempo -f tempo-custom-values.yaml --namespace monitoring


microk8s helm uninstall myloki -n monitoring
microk8s helm uninstall mygrafana -n monitoring

helm uninstall myprometheus -n monitoring

helm uninstall mygrafana -n monitoring



kubectl get pvc mygrafana -n monitoring -o yaml
kubectl patch pvc mygrafana -n monitoring -p '{"metadata":{"finalizers":[]}}' --type=merge
kubectl get pvc -n monitoring



helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo update
helm install [RELEASE_NAME] prometheus-community/prometheus
helm install myprometheus prometheus-community/prometheus -f prometheus-custom-values.yaml --namespace monitoring

helm install myprometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  -f prometheus-custom-values.yaml \
  --dry-run \
  --debug


helm install myprometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  -f prometheus-custom-values.yaml



helm repo add rawfile-localpv https://openebs.github.io/rawfile-localpv
helm repo update rawfile-localpv
helm install rawfile-localpv rawfile-localpv/rawfile-localpv -n openebs --create-namespace

StorageClass : rawfile-localpv
kubectl get sc
kubectl get statefulsets -n monitoring 

kubectl delete pod mygrafana-7bdf86d56b-fwh44 \
  -n monitoring \
  --grace-period=0 \
  --force






microk8s helm install data-import . -f values-data-import.yml --namespace agentcis-data-import
microk8s helm uninstall data-import -n agentcis-data-import

  
helm install sms-campaign . -f values-sms-campaign.yml --namespace agentcis-sms-campaign 
helm uninstall sms-campaign -n agentcis-sms-campaign


helm install email-summary . -f values-email-summary.yml --namespace agentcis-email-summary
helm uninstall email-summary -n agentcis-email-summary

helm install onboarding . -f values-onboarding.yml --namespace agentcis-onboarding
helm uninstall onboarding -n agentcis-onboarding




microk8s helm upgrade --install data-import . \
  -f values-data-import.yml \
  -n agentcis-data-import \
  --atomic


microk8s helm install data-import . \
  -f values-data-import.yml \
  -n agentcis-data-import \
  --atomic

helm uninstall mytempo -n monitoring

helm uninstall myprometheus -n monitoring

microk8s helm upgrade --install myloki grafana/loki \
  -f loki-custom-values.yaml \
  -n monitoring


http://prometheus-operated.monitoring.svc.cluster.local:9090
http://myloki-gateway.monitoring.svc.cluster.local:80